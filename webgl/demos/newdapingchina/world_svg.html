<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>ANTIY LABS</title>
        <link href="css/world_table.css" rel="stylesheet">
        <link href="css/world_style.css" rel="stylesheet">
        
        <script type="text/javascript" src="js/lib/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/lib/raphael.js"></script>
        <script type="text/javascript" src="js/lib/highcharts.js"></script>
        <script type="text/javascript" src="js/world_dark-green.js"></script>
        <script type="text/javascript" src="js/world_1900_760.js"></script>
        <script type="text/javascript" src="js/world_ready.js"></script>
        <script type="text/javascript" src="js/world_raphael.js"></script>
        <script type="text/javascript" src="js/world_alarm.js"></script>
        <script type="text/javascript" src="js/world_data.js"></script>
        <script type="text/javascript" src="js/statis_data.js"></script>
        
        <script>
            function getAlarmData() {
                // for(var i = 0; i < alarm_list.length; i++){
                    // alert(alarm_list[i]);
                // }
                for (x in alarm_list) {
                    monitor_data = alarm_list[x];
                    lon = monitor_data[2];
                    lat = monitor_data[3];
                    
                    monitor_location = getXY(parseFloat(lon), parseFloat(lat));
                    //monitor_data['cx'] = monitor_location['cx'];
                    //monitor_data['cy'] = monitor_location['cy'];
                    monitor_data.push(monitor_location['cx']);
                    monitor_data.push(monitor_location['cy']);
                    
                    // console.info(alarm_list[x][6])
                    // console.info(alarm_list[x][2])
                    // console.info(monitor_location['cx'])
                    //console.info(typeof(monitor_data));
                    //console.info(monitor_data['cx']);
                    //console.info(monitor_data);
                    alarm_data.push(monitor_data);
                }
            }
            
            getXY = function (lon, lat) {
                return {
                    cx: (lon+169)*(1900 - 50)/349,
                    cy: (84-lat)*(760 - 20)/140
                };
                
            };
            
            
            // 捕获数据列表   
            var alarm_data = [];
            getAlarmData();
            
            var world_width = 1900;
            var world_height = 1050;
            var raphael;
            
            Raphael(10, 10, world_width, 40, function () {
                // 定义整体空间
                raphael1 = this;
                raphael1.rect(0, 0, world_width, world_height, 0).attr({
                    //fill:"#11567D",
                    //"fill-opacity": 1,
                    stroke: "#888",
                    "stroke-width": 0.5,
                    "stroke-linejoin": "round",
                    //fill: "#80f8eb",
                    fill:"0-#408988-#80f8eb",
                    "fill-opacity": 0.2,
                    "stroke-opacity": 0.0
                });
                //raphael1.text(950, 18, '热 烈 欢 迎 市 领 导 莅 临 安 天 参 观 指 导').attr({fill: "#ff0000", "font-family":"微软雅黑", "font-size":36, "font-weight": "bold", "opacity": 0.8});
                //raphael1.text(930, 18, '热 烈 欢 迎 市 领 导').attr({fill: "#ff0000", "font-family":"微软雅黑", "font-size":36, "font-weight": "bold", "opacity": 0.8, "text-anchor":"end"});
                //raphael1.text(970, 18, '莅 临 安 天 参 观 指 导').attr({fill: "#ff0000", "font-family":"微软雅黑", "font-size":36, "font-weight": "bold", "opacity": 0.8, "text-anchor":"start"});
                raphael1.text(900, 18, '感 攻 击 于 须 臾').attr({fill: "#ff0000", "font-family":"微软雅黑", "font-size":36, "font-weight": "bold", "opacity": 0.8, "text-anchor":"end"});
                raphael1.text(1000, 18, '定 源 头 于 一 瞬').attr({fill: "#ff0000", "font-family":"微软雅黑", "font-size":36, "font-weight": "bold", "opacity": 0.8, "text-anchor":"start"});
                //raphael1.text(900, 18, '安 天 兄 弟 姐 妹 热 烈').attr({fill: "#ff0000", "font-family":"微软雅黑", "font-size":36, "font-weight": "bold", "opacity": 0.8, "text-anchor":"end"});
                //raphael1.text(1000, 18, '欢 迎 蒋 旭 宪 老 师').attr({fill: "#ff0000", "font-family":"微软雅黑", "font-size":36, "font-weight": "bold", "opacity": 0.8, "text-anchor":"start"});
            });
            Raphael(10, 50, world_width, world_height, function () {
                
                // 定义整体空间
                raphael = this;
                raphael.rect(0, 0, world_width, world_height, 10).attr({
                    stroke: "#888",
                    "stroke-width": 0.5,
                    "stroke-linejoin": "round",
                    fill: "#333",
                    "fill-opacity": 0.0,
                    "stroke-opacity": 0.0
                });
                
                var rect_1 = raphael.rect(0, 0, world_width, 10, 0).attr({
                    //fill:"#11567D",
                    //"fill-opacity": 1,
                    stroke: "#888",
                    "stroke-width": 0.5,
                    "stroke-linejoin": "round",
                    //fill: "#80f8eb",
                    fill:"0-#408988-#80f8eb",
                    "fill-opacity": 0.2,
                    "stroke-opacity": 0.0
                });
                
                //rect_1.glow({color:"#ffffff",opacity:0.6});
                
                var rect_2 = raphael.rect(0, 750, world_width, 10, 0).attr({
                    //fill:"#11567D",
                    //"fill-opacity": 1,
                    stroke: "#888",
                    "stroke-width": 0.5,
                    "stroke-linejoin": "round",
                    //fill: "#80f8eb",
                    fill:"0-#408988-#80f8eb",
                    "fill-opacity": 0.2,
                    "stroke-opacity": 0.0
                });
                
                //rect_2.glow({color:"#80f8eb",opacity:0.6});
                
                //============================= 地图 ===========================
                /*
                 * 绘制地图
                 */
                raphael.setStart();
                for (var country in worldmap.shapes) {
                    raphael.path(worldmap.shapes[country]).attr({"stroke-linejoin": "round", stroke: "#80f8eb", fill: "#408988", "stroke-opacity": 1, "stroke-width": 1.0, "fill-opacity": 0.3}).data("name", worldmap.names[country]);
                }
                var world = raphael.setFinish();
                
                /*
                 * 底格横线
                 */ 
                for (var h = 20,i = 0; h <= 760; h += 40, i++ ) {
                    if(i%3==0 && i!=0 && i!= 18){
                        raphael.path("M0," + h + "L1900," + h).attr({stroke: "#4B8F88", "stroke-width": 1, "stroke-dasharray":"", "stroke-opacity": 0.8});
                    }
                    else{
                        raphael.path("M0," + h + "L1900," + h).attr({stroke: "#4B8F88", "stroke-width": 1, "stroke-dasharray":"- ", "stroke-opacity": 0.6});
                    }
                }
                
                /*
                 * 底格纵线
                 */
                //raphael.path("M0,0L0,760").attr({stroke: "#4B8F88", "stroke-width": 1, "stroke-dasharray":"", "stroke-opacity": 0.8});
                for (var w = 0,i = 0; w <= 1900; w += 40, i++ ) {
                    if(i%3==0 && i !=0 && i!= 39){
                        raphael.path("M" + w + ",0L" + w + ",760").attr({stroke: "#4B8F88", "stroke-width": 1, "stroke-dasharray":"", "stroke-opacity": 0.8});
                    }
                    else{
                        if(i != 0){
                            raphael.path("M" + w + ",0L" + w + ",760").attr({stroke: "#4B8F88", "stroke-width": 1, "stroke-dasharray":"- ", "stroke-opacity": 0.6});
                        }
                        
                    }
                }
                //raphael.path("M1600,0L1600,600").attr({stroke: "#4B8F88", "stroke-width": 1, "stroke-dasharray":"", "stroke-opacity": 0.8});
                
                /*
                 * 底格十字光晕
                 */
                
                var d_x = 0,
                    d_y = 0;
                for (var w = 120; w < 1830; w += 120) {
                    for (var h = 20; h < 760; h += 120) {
                        raphael.path("M" + w + "," + (h-5) + "L" + w + "," + (h+5)).attr({stroke: "#80f8eb", "stroke-width": 1, "stroke-opacity": 0.5}).glow({color:"#80f8eb", width:8,opacity:0.25});
                        raphael.path("M" + (w-5) + "," + h + "L" + (w+5) + "," + h).attr({stroke: "#80f8eb", "stroke-width": 1, "stroke-opacity": 0.5}).glow({color:"#80f8eb", width:8,opacity:0.25});
                    }
                }
                
                
                //============================= 地图 ===========================
                
                
                
                
                
                //============================= 板块 ===========================
                /*
                 * 左下统计模块
                 */
                draw_statistics_div(raphael, world_statis);
                
                /*
                 * 花瓣图
                 */
                //var data_1 = [10, 12, 13, 24, 25, 36, 37, 48, 49, 50, 50, 62, 63, 74, 75, 86, 87, 98, 99, 20, 21, 22, 23, 24];//数据
                var data_1 = [
                    270
                    ,207
                    ,210
                    ,169
                    ,122
                    ,180
                    ,187
                    ,137
                    ,167
                    ,226
                    ,251
                    ,259
                    ,238
                    ,178
                    ,219
                    ,234
                    ,239
                    ,246
                    ,290
                    ,225
                    ,256
                    ,294
                    ,223
                    ,241
                ];//2012年10月31日放马url真实数据
                wind_rose("",400,810, 10, 70, 24, 1, "#80f8eb", data_1);
                var data_2 = [
                    24
                    ,25
                    ,22
                    ,18
                    ,21
                    ,21
                    ,19
                    ,19
                    ,9
                    ,24
                    ,19
                    ,25
                    ,31
                    ,19
                    ,23
                    ,31
                    ,21
                    ,27
                    ,37
                    ,24
                    ,35
                    ,31
                    ,30
                    ,24
                ];//2012年10月31日放马ip真实数据
                wind_rose("",580,810, 10, 70, 24, 1, "#589AE4", data_2);
                
                /*
                 * 底部table的告警图标
                 */
                //static_source_alarm(raphael, 1260, 819, 1, 3, 4, 6, 9);
                //static_source_alarm(raphael, 1260, 845, 1, 3, 4, 6, 9);
                //static_source_alarm(raphael, 1260, 869, 1, 3, 4, 6, 9);
                //static_source_alarm(raphael, 1260, 895, 1, 3, 4, 6, 9);
                //static_source_alarm(raphael, 1260, 919, 1, 3, 4, 6, 9);
                //static_source_alarm(raphael, 1260, 945, 1, 3, 4, 6, 9);
                
                static_target_alarm(raphael, 795, 804, 1, 3, 4, 6, 9);
                static_target_alarm(raphael, 795, 830, 1, 3, 4, 6, 9);
                static_target_alarm(raphael, 795, 854, 1, 3, 4, 6, 9);
                static_target_alarm(raphael, 795, 880, 1, 3, 4, 6, 9);
                static_target_alarm(raphael, 795, 904, 1, 3, 4, 6, 9);
                static_target_alarm(raphael, 795, 930, 1, 3, 4, 6, 9);
                
                //alarm_symbol(raphael, 795, 819, 1, 5, 9, 12, "#9F3F45", "#ffffff","#9F3F45");
                //alarm_symbol(raphael, 795, 845, 1, 5, 9, 12, "#9F3F45", "#ffffff","#9F3F45");
                //alarm_symbol(raphael, 795, 869, 1, 5, 9, 12, "#9F3F45", "#ffffff","#9F3F45");
                //alarm_symbol(raphael, 795, 895, 1, 5, 9, 12, "#D9B04C", "#ffffff","#D9B04C");
                //alarm_symbol(raphael, 795, 919, 1, 5, 9, 12, "#D9B04C", "#ffffff","#D9B04C");
                //alarm_symbol(raphael, 795, 945, 1, 5, 9, 12, "#138B99", "#ffffff","#138B99");
                //============================= 板块 ===========================
                
                
                
                //============================= 源-目标告警 ===========================
                var alarm_r1 = 2,
                    alarm_r2 = 5,
                    alarm_r3 = 12,
                    alarm_sectorsCount = 12,
                    alarm_1_color_0 = "#D9B04C",
                    alarm_1_color_1 = "#ffffff",
                    alarm_1_color_2 = "#D9B04C",
                    alarm_2_color_0 = "#42B2B8",
                    alarm_2_color_1 = "#ffffff",
                    alarm_2_color_2 = "#138B99",
                    alarm_3_color_0 = "#9F3F45",
                    alarm_3_color_1 = "#ffffff",
                    alarm_3_color_2 = "#9F3F45";
                
                // // 捕获数据列表   
                // var alarm_data = [
//                     
                    // {cx:990, cy:194, color:alarm_3_color_0},
                    // {cx:980, cy:187, color:alarm_3_color_0},
                    // {cx:1660, cy:554, color:alarm_3_color_0}
                // ];
                
                //var now_remove_num = 0;
                //var alarm_now_li = [];
                //for (var i = 0; i < 95; i++) {
                //    alarm_now_li[i] = [];
                //}
                
                var now_flash_num = 0;
                setInterval(start_alarm, 1000);
                
                function start_alarm(){
                    //if(now_flash_num< 10){
                        for(var w = 0; w < Math.floor(Math.random()*10); w += 1){
                        //if(Math.floor(Math.random()*10) > 3){
                            alarm_symbol_2(raphael, alarm_data[now_flash_num][11], alarm_data[now_flash_num][12]);
                            scroll_table(alarm_data[now_flash_num]);
                            now_flash_num += 1;
                            if(now_flash_num == alarm_data.length){
                               now_flash_num = 0
                            }
                        }
                    
                        
                        //alert(Math.floor(Math.random()*10));
                        
                        // if(now_flash_num%5 == 0){
                            //alarm_symbol_2(raphael, alarm_data[now_flash_num][8], alarm_data[now_flash_num][9]);
                        // }
//                         
                        // if(now_flash_num%5 == 1){
                            // alarm_circle_1(raphael, alarm_data[now_flash_num][8], alarm_data[now_flash_num][9], 1, 3, 4, 6, 9);
                        // }
//                         
                        // if(now_flash_num%5 == 2){
                            // alarm_circle_2(raphael, alarm_data[now_flash_num][8], alarm_data[now_flash_num][9], 1, 3, 4, 6, 9);
                        // }
//                         
                        // if(now_flash_num%5 == 3){
                            // alarm_circle_3(raphael, alarm_data[now_flash_num][8], alarm_data[now_flash_num][9], 1, 3, 4, 6, 9);
                        // }
                        
                        //if(now_flash_num%5 == 4){
                            //alarm_circle_4(raphael, alarm_data[now_flash_num][8], alarm_data[now_flash_num][9], 2, 4, 5, 7, 11);
                        //}
                        
                        //scroll_table(alarm_data[now_flash_num]);
                        //now_flash_num += 1;
                    //}
                    
                }
                
                //为表格添加事件
                function scroll_table(alarm_data){
                    //time = (new Date()).toLocaleTimeString();
                    
                    var url = alarm_data['0'];
                    if(url.length > 40){
                        url = url.substr(0, 40) + '...';
                    }
                    
                    _tbodydom = $('#scrolltalbe tbody');
                    _trdom = $('#scrolltalbe tbody tr');
        
                    _trdom.eq(0).remove();
        
                    _old = _tbodydom.html();
        
                    _new = 
                        '<tr><td style="width: 45px"><div style="width: 45px">&nbsp;</div></td>'+
                            '<td style="width: 228px"><div style="width: 290px">' + alarm_data['5'] + '</div></td>'+
                            '<td style="width: 135px"><div style="width: 110px">' + alarm_data['1'] + '</div></td>'+
                            '<td style="width: 135px"><div style="width: 110px">' + alarm_data['8'] + '</div></td>'+
                            '<td style="width: 220px"><div style="width: 300px">' + url + '</div></td>'+
                            '<td style="width: 250px"><div style="width: 240px">' + alarm_data['7'] + '</div></td></tr>';
                            //'<td style="width: 80px" ><div style="width: 80px">'+time+'</div></td></tr>';
                    _tbodydom.html(_old + _new);
                    
                };
                //============================= 源-目标告警 ===========================
                
                
                
                //============================= 雷达捕获告警 ===========================
                var flash_width = world_width,
                    flash_height = 760,
                    flash_count = flash_width/20,
                    flash_opacity = [],
                    flash_opacity_1 = [],
                    flash_sectors = [];
                
                var flashParams = {
                    //stroke: "#888",
                    "stroke-width": 0.5,
                    //"stroke-linejoin": "round",
                    fill: "#80f8eb",
                    "fill-opacity": 0.0,
                    "stroke-opacity": 0.0
                };
                
                var flash_cx = 0,
                    flash_item_width = 20;
                
                for (var i = 0; i < flash_count; i++) {
                    
                    
                    // if(i <30){
                        // flash_opacity[i] = i*2 / (flash_count*4);
                    // }
                    // else{
                        // flash_opacity[i] = i*3 / (flash_count*4);
                    // }
                    
                    //flash_opacity[i] = i*6 / (flash_count*4);
                    
                    //flash_opacity[i] = 0;
                    
                    flash_sectors[i] = raphael.rect(flash_cx, 0, flash_item_width, flash_height, 0).attr({ fill: "#80f8eb", "fill-opacity": i*3 / (flash_count*4)});
                    flash_sectors[i].attr("fill-opacity", 0);
                    flash_cx += flash_item_width;
                    
                }
                
                for (var i = 0; i < 6; i++) {
                    flash_opacity[i] = i*30 / (flash_count*4);
                }
                var now_path_num = 0,
                    temp_num = 0;
                
                var flash_tick;
                (function flash_ticker() {
                    temp_num = now_path_num%flash_count
                    //console.info(temp_num);
                    flash_sectors[temp_num].attr("fill-opacity", flash_opacity[0]);
                    if(temp_num + 1 >= flash_count){
                        flash_sectors[temp_num + 1 - flash_count].attr("fill-opacity", flash_opacity[1]);
                    }
                    else{
                        flash_sectors[temp_num + 1].attr("fill-opacity", flash_opacity[1]);
                    }
                    if(temp_num + 2 >= flash_count){
                        flash_sectors[temp_num + 2 - flash_count].attr("fill-opacity", flash_opacity[2]);
                    }
                    else{
                        flash_sectors[temp_num + 2].attr("fill-opacity", flash_opacity[2]);
                    }
                    if(temp_num + 3 >= flash_count){
                        flash_sectors[temp_num + 3 - flash_count].attr("fill-opacity", flash_opacity[3]);
                    }
                    else{
                        flash_sectors[temp_num + 3].attr("fill-opacity", flash_opacity[3]);
                    }
                    if(temp_num + 4 >= flash_count){
                        flash_sectors[temp_num + 4 - flash_count].attr("fill-opacity", flash_opacity[4]);
                    }
                    else{
                        flash_sectors[temp_num + 4].attr("fill-opacity", flash_opacity[4]);
                    }
                    if(temp_num + 5 >= flash_count){
                        flash_sectors[temp_num + 5 - flash_count].attr("fill-opacity", flash_opacity[5]);
                    }
                    else{
                        flash_sectors[temp_num + 5].attr("fill-opacity", flash_opacity[5]);
                    }
                    now_path_num += 1;
                    
                    /*
                    flash_opacity.unshift(flash_opacity.pop());
                    for (var i = 0; i < flash_count; i++) {
                        flash_sectors[i].attr("fill-opacity", flash_opacity[i]);
                    }
                    */
                    
                    flash_tick = setTimeout(flash_ticker, 20);
                })();
                
                //============================= 雷达捕获告警 ===========================
                
                
                return function () {
                    //clearTimeout(alerm_ticker);
                    clearTimeout(flash_tick);
                    raphael.remove();
                };
                
            });
            
            
            /*
             * 绘制花瓣图
             */
            function wind_rose(holderid, x, y, r1, r2, count, stroke_width, colour, data) {
                var sectorsCount = count || 12,
                    color = colour || "#fff",
                    width = stroke_width || 15,
                    cx = r2 + width + 20,//中心点横坐标
                    cy = r2 + width + 20,//中心点纵坐标
                    beta = 2 * Math.PI / sectorsCount;
                    
                
                // 兼容两种定位方法
                if(holderid != ""){
                    r = Raphael(holderid, r2 * 2 + width * 2 + 35, r2 * 2 + width * 2 + 35);//周围有数字，所以加上30的偏移量
                }
                else{
                    r = Raphael(x, y, r2 * 2 + width * 2 + 35, r2 * 2 + width * 2 + 35);//周围有数字，所以加上30的偏移量
                }                    
                    
                var paths = r.set();
                    
                // 绘制每个wind_rose花瓣的函数
                r.customAttributes.draw_wind_rose = function (cx, cy, r, R, d1, d2, the_color) {
                    /* 
                     * cx, cy为中心点坐标
                     * r为内圆半径。R为wind_rose花瓣的半径，注意，不是圆的半径
                     * d1起点角度
                     * d2终点角度
                     * the_color为wind_rose的颜色。默认为统一的 */
                    d1 = d1 + 270;
                    d2 = d2 + 270;
                    a1 = (d1 % 360) * Math.PI / 180;
                    a2 = (d2 % 360) * Math.PI / 180;
                    
                    /*
                     * 计算四个点的坐标
                     * */
                    var tx1 = cx + r * Math.cos(a1);
                    var ty1 = cy + r * Math.sin(a1);
                    var tx2 = cx + R * Math.cos(a1);
                    var ty2 = cy + R * Math.sin(a1);
                    var tx3 = cx + R * Math.cos(a2);
                    var ty3 = cy + R * Math.sin(a2);
                    var tx4 = cx + r * Math.cos(a2);
                    var ty4 = cy + r * Math.sin(a2);
                    
                    return {
                        path: [["M", tx1, ty1], ["L", tx2, ty2], ["A", R, R, 0, 0, 1, tx3, ty3], ["L", tx4, ty4], ["z"]],
                        fill: the_color
                    };
                }
                
                /*
                 * 绘制底色圆
                 * */
                var temp_r = (r2 - r1)/100;
                r.circle(cx, cy, r1).attr({stroke: "#507973", "stroke-width": 1});
                r.circle(cx, cy, r2 - 65*temp_r).attr({stroke: "#80f8eb", "stroke-width": 1});
                r.circle(cx, cy, r2 - 50*temp_r).attr({stroke: "#507973", "stroke-width": 1});
                r.circle(cx, cy, r2 - 35*temp_r).attr({stroke: "#80f8eb", "stroke-width": 1});
                r.circle(cx, cy, r2 - 20*temp_r).attr({stroke: "#507973", "stroke-width": 1});
                r.circle(cx, cy, r2).attr({stroke: "#80f8eb", "stroke-width": 1});
                
                /*
                 * 绘制外圆外的刻度和底线，可以和下面的合在一起。
                 * */
                for (var i = 0; i < sectorsCount; i++) {
                    var alpha = beta * i - Math.PI / 2,
                        cos = Math.cos(alpha),
                        sin = Math.sin(alpha);
                    // 绘线
                    //r.path([["M", cx + r1 * cos, cy + r1 * sin], ["L", cx + r2 * cos, cy + r2 * sin]]).attr({stroke: "#3c0", "stroke-width": 1, "stroke-linecap": "round"});
                    
                    r3 = r2 + 8;
                    if(i%2 == 0){
                        if(i == 0){
                            r.text(cx + r3 * cos, cy + r3 * sin, 24).attr({fill: "#80f8eb", "font-size":12, "font-weight": "bold"});
                        }
                        else{
                            r.text(cx + r3 * cos, cy + r3 * sin, i).attr({fill: "#80f8eb", "font-size":12, "font-weight": "bold"});
                        }
                    }
                }
                
                
                var max_data,//最大的数据。计算比例用
                    start_angle = 0,//起始角度
                    r_data,//花瓣的半径
                    //每个花瓣的角度
                    val = 360/sectorsCount;
                    // 不同数据不同颜色。
                    the_colors = ["rgb(132, 166, 233)", "rgb(117, 155, 231)", "rgb(116, 155, 231)", "rgb(112, 151, 230)", "rgb(128, 163, 233)","rgb(120, 157, 231)", 
                        "rgb(188, 206, 243)", "rgb(192, 209, 244)", "rgb(188, 207, 243)", "rgb(185, 204, 243)", "rgb(187, 206, 243)", "rgb(185, 204, 243)", 
                        "rgb(178, 199, 241)", "rgb(177, 199, 241)", "rgb(171, 194, 240)", "rgb(164, 189, 239)", "rgb(139, 171, 235)", "rgb(95, 139, 227)", 
                        "rgb(113, 152, 230)", "rgb(136, 169, 234)", "rgb(138, 170, 234)", "rgb(148, 177, 236)", "rgb(151, 179, 237)", "rgb(143, 174, 235)"];
                
                //data = data.sort(function (a, b) { return b - a;});
                
                /*
                 * 循环一下最大值。
                 * */
                max_data = 0;
                for (var i = 0, ii = data.length; i < ii; i++) {
                    if (data[i] > max_data){
                        max_data = data[i];
                    }
                }
                
                /*
                 * 绘制花瓣。
                 * */
                for (i = 0; i < sectorsCount; i++) {
                    (function (i, val) {
                        if(data[i] != 0 || data[i] != undefined){
                            r_data = data[i]/max_data*(r2 - r1) + r1;
                        }
                        else{
                            r_data = r1;
                        }
                        var ttt = r.path().attr({draw_wind_rose: [cx, cy, r1, r_data, start_angle, start_angle + val, colour], stroke: colour, "stroke-width": 1.5, "stroke-opacity": 0.9,"opacity":0.5});
                         paths.push(ttt);
                    })(i, val);
                    start_angle += val;
                }
                
                var temp_int = 0;
                
                var show_tick;
                function show_ticker() {
                    if(temp_int < sectorsCount){
                        paths[temp_int].attr("opacity", 0.5);
                        temp_int += 1;
                        r.safari();
                        show_tick = setTimeout(show_ticker, 800 / sectorsCount);
                    }
                };
                
                var tick;
                (function ticker() {
                    paths.attr("opacity", 0);
                    temp_int = 0;
                    show_ticker();
                    //tick = setTimeout(ticker, 4000 );
                })();
            }
        </script>
        
    </head>
    
    <body>
        
        <div id="login_div_2" class="login_div_2">
            <div id="text_div" class="text_div">Trojan/Win32.Powp.dey</div>
        </div>
        
        <div id="login_div_3" class="login_div_3"></div>
        
        <div id="table_div_1" class="table_div_1">
            <table id='scrolltalbe' class="table table-striped">
                <thead>
                    <tr>
                        
                        <th style="width: 45px"></th>
                        <th style="width: 290px">恶意代码名称</th>
                        <th style="width: 110px">放马源地址</th>
                        <th style="width: 110px">疑似感染目标</th>
                        <th style="width: 300px">URL</th>
                        <th style="width: 240px">样本HASH</th>
                        <!-- <th style="width: 80px">捕获时间</th> -->
                    </tr>
                </thead>
                <tbody>
                    <tr><td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                    <tr><td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                    <tr><td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                    <tr><td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                    <tr><td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                    <tr><td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                </tbody>
            </table>
        </div>
        
        <div id="bottom_div" class="bottom_div">
            <div class="bottom_chart">
                
                <div id="left_01" class="areaChartsty"></div>
            </div>
            <div class="bottom_chart">
                
                <div id="left_02" class="areaChartsty"></div>
            </div>
            <div class="bottom_chart">
               
                <div id="left_03" class="areaChartsty"></div>
            </div>
            <div class="bottom_chart">
            
                <div id="left_04" class="areaChartsty"></div>
            </div>
            <div class="bottom_chart">
            
                <div id="left_05" class="areaChartsty"></div>
            </div>
            <div id="linec">
                <div id="line_chart" class="line_chart"></div>
                <div class="line_charttext">&nbsp;&nbsp;60W</div>
            </div>
        </div>
    </body>
</html>